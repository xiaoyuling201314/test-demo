<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dayuan.mapper.data.BaseDeviceTypeMapper">
    <resultMap id="BaseResultMap" type="com.dayuan.bean.data.BaseDeviceType">
        <id column="id" property="id" jdbcType="VARCHAR"/>
        <result column="number" property="number" jdbcType="VARCHAR"/>
        <result column="brand" property="brand" jdbcType="VARCHAR"/>
        <result column="device_name" property="deviceName" jdbcType="VARCHAR"/>
        <result column="device_series" property="deviceSeries" jdbcType="VARCHAR"/>
        <result column="device_version" property="deviceVersion" jdbcType="VARCHAR"/>
        <result column="device_type" property="deviceType" jdbcType="VARCHAR"/>
        <result column="device_maker" property="deviceMaker" jdbcType="VARCHAR"/>
        <result column="description" property="description" jdbcType="VARCHAR"/>
        <result column="type" property="type" jdbcType="SMALLINT"/>
        <result column="file_path" property="filePath" jdbcType="VARCHAR"/>
        <result column="remark" property="remark" jdbcType="VARCHAR"/>
        <result column="checked" property="checked" jdbcType="SMALLINT"/>
        <result column="delete_flag" property="deleteFlag" jdbcType="SMALLINT"/>
        <result column="create_by" property="createBy" jdbcType="VARCHAR"/>
        <result column="create_date" property="createDate" jdbcType="TIMESTAMP"/>
        <result column="update_by" property="updateBy" jdbcType="VARCHAR"/>
        <result column="update_date" property="updateDate" jdbcType="TIMESTAMP"/>
        <result column="param1" property="param1" jdbcType="VARCHAR"/>
        <result column="param2" property="param2" jdbcType="VARCHAR"/>
        <result column="param3" property="param3" jdbcType="VARCHAR"/>
    </resultMap>
    <sql id="Base_Column_List">
        id, number, brand, device_name, device_series, device_version, device_type, device_maker,
        description, type, file_path, remark, checked, delete_flag, create_by, create_date,
        update_by, update_date, param1, param2, param3
    </sql>
    <!-- 查询条件 -->
    <sql id="Example_Where_Clause">
        where delete_flag = 0 and type=0
        <trim suffixOverrides=",">
            <if test="obj.baseBean != null">
                <if test="obj.baseBean.deviceName != null and obj.baseBean.deviceName != ''">
                    and device_name like CONCAT('%', #{obj.baseBean.deviceName}, '%')
                </if>
            </if>
        </trim>
    </sql>

    <sql id="Example_Where_Clauses">
        <if test="obj.type != null and obj.type ==0">
            and type=0
        </if>
        <if test="obj.type != null and obj.type ==1">
            and type=1
        </if>
        <if test="obj.number != null and obj.number !='' ">
            and (number like CONCAT('%', #{obj.number}, '%')
            or brand like CONCAT('%', #{obj.number}, '%')
            or device_name like CONCAT('%', #{obj.number}, '%')
            or device_series like CONCAT('%', #{obj.number}, '%'))
        </if>
    </sql>
    <select id="loadDatagrids" resultMap="BaseResultMap" parameterType="Object">
        select
        <include refid="Base_Column_List"/>
        FROM base_device_type
        where delete_flag=0
        <include refid="Example_Where_Clauses"/>
        order by create_date ${order} limit #{rowOffset}, #{pageSize}
    </select>
    <select id="getRowTotals" resultType="java.lang.Integer" parameterType="Object">
        select count(1) as rowTotal
        from base_device_type
        where delete_flag=0
        <include refid="Example_Where_Clauses"/>
    </select>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        <include refid="Base_Column_List"/>
        from base_device_type
        where id = #{id,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        update base_device_type set delete_flag=1,update_date=now()
        where id in
        <foreach collection="array" item="ids" index="index" open="(" close=")" separator=",">
            #{ids}
        </foreach>
    </delete>
    <insert id="insert" parameterType="com.dayuan.bean.data.BaseDeviceType">
        INSERT INTO base_device_type (id, number, brand,
                                      device_name, device_series, device_version,
                                      device_type, device_maker, description,
                                      type, file_path, remark,
                                      checked, delete_flag, create_by,
                                      create_date, update_by, update_date,
                                      param1, param2, param3
        )
        VALUES (#{id,jdbcType=VARCHAR}, #{number,jdbcType=VARCHAR}, #{brand,jdbcType=VARCHAR},
                                        #{deviceName,jdbcType=VARCHAR}, #{deviceSeries,jdbcType=VARCHAR}, #{deviceVersion,jdbcType=VARCHAR},
                                        #{deviceType,jdbcType=VARCHAR}, #{deviceMaker,jdbcType=VARCHAR}, #{description,jdbcType=VARCHAR},
                                        #{type,jdbcType=SMALLINT}, #{filePath,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR},
                                                                                                 #{checked,jdbcType=SMALLINT},
                                                                                                 #{deleteFlag,jdbcType=SMALLINT},
                                                                                                 #{createBy,jdbcType=VARCHAR},
                                                                                                 #{createDate,jdbcType=TIMESTAMP},
                                                                                                 #{updateBy,jdbcType=VARCHAR},
                                                                                                 #{updateDate,jdbcType=TIMESTAMP},
                                                                                                 #{param1,jdbcType=VARCHAR},
                                                                                                 #{param2,jdbcType=VARCHAR},
                                                                                                 #{param3,jdbcType=VARCHAR}
        )
    </insert>
    <insert id="insertSelective" parameterType="com.dayuan.bean.data.BaseDeviceType">
        insert into base_device_type
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null and id !=''">
                id,
            </if>
            <if test="number != null">
                number,
            </if>
            <if test="brand != null">
                brand,
            </if>
            <if test="deviceName != null">
                device_name,
            </if>
            <if test="deviceSeries != null">
                device_series,
            </if>
            <if test="deviceVersion != null">
                device_version,
            </if>
            <if test="deviceType != null">
                device_type,
            </if>
            <if test="deviceMaker != null">
                device_maker,
            </if>
            <if test="description != null">
                description,
            </if>
            <if test="type != null">
                type,
            </if>
            <if test="filePath != null">
                file_path,
            </if>
            <if test="remark != null">
                remark,
            </if>
            <if test="checked != null">
                checked,
            </if>
            <if test="deleteFlag != null">
                delete_flag,
            </if>
            <if test="createBy != null">
                create_by,
            </if>
            <if test="createDate != null">
                create_date,
            </if>
            <if test="updateBy != null">
                update_by,
            </if>
            <if test="updateDate != null">
                update_date,
            </if>
            <if test="param1 != null">
                param1,
            </if>
            <if test="param2 != null">
                param2,
            </if>
            <if test="param3 != null">
                param3,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null and id !=''">
                #{id,jdbcType=VARCHAR},
            </if>
            <if test="number != null">
                #{number,jdbcType=VARCHAR},
            </if>
            <if test="brand != null">
                #{brand,jdbcType=VARCHAR},
            </if>
            <if test="deviceName != null">
                #{deviceName,jdbcType=VARCHAR},
            </if>
            <if test="deviceSeries != null">
                #{deviceSeries,jdbcType=VARCHAR},
            </if>
            <if test="deviceVersion != null">
                #{deviceVersion,jdbcType=VARCHAR},
            </if>
            <if test="deviceType != null">
                #{deviceType,jdbcType=VARCHAR},
            </if>
            <if test="deviceMaker != null">
                #{deviceMaker,jdbcType=VARCHAR},
            </if>
            <if test="description != null">
                #{description,jdbcType=VARCHAR},
            </if>
            <if test="type != null">
                #{type,jdbcType=SMALLINT},
            </if>
            <if test="filePath != null">
                #{filePath,jdbcType=VARCHAR},
            </if>
            <if test="remark != null">
                #{remark,jdbcType=VARCHAR},
            </if>
            <if test="checked != null">
                #{checked,jdbcType=SMALLINT},
            </if>
            <if test="deleteFlag != null">
                #{deleteFlag,jdbcType=SMALLINT},
            </if>
            <if test="createBy != null">
                #{createBy,jdbcType=VARCHAR},
            </if>
            <if test="createDate != null">
                #{createDate,jdbcType=TIMESTAMP},
            </if>
            <if test="updateBy != null">
                #{updateBy,jdbcType=VARCHAR},
            </if>
            <if test="updateDate != null">
                #{updateDate,jdbcType=TIMESTAMP},
            </if>
            <if test="param1 != null">
                #{param1,jdbcType=VARCHAR},
            </if>
            <if test="param2 != null">
                #{param2,jdbcType=VARCHAR},
            </if>
            <if test="param3 != null">
                #{param3,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.dayuan.bean.data.BaseDeviceType">
        update base_device_type
        <set>
            <if test="number != null">
                number = #{number,jdbcType=VARCHAR},
            </if>
            <if test="brand != null">
                brand = #{brand,jdbcType=VARCHAR},
            </if>
            <if test="deviceName != null">
                device_name = #{deviceName,jdbcType=VARCHAR},
            </if>
            <if test="deviceSeries != null">
                device_series = #{deviceSeries,jdbcType=VARCHAR},
            </if>
            <if test="deviceVersion != null">
                device_version = #{deviceVersion,jdbcType=VARCHAR},
            </if>
            <if test="deviceType != null">
                device_type = #{deviceType,jdbcType=VARCHAR},
            </if>
            <if test="deviceMaker != null">
                device_maker = #{deviceMaker,jdbcType=VARCHAR},
            </if>
            <if test="description != null">
                description = #{description,jdbcType=VARCHAR},
            </if>
            <if test="type != null">
                type = #{type,jdbcType=SMALLINT},
            </if>
            <if test="filePath != null">
                file_path = #{filePath,jdbcType=VARCHAR},
            </if>
            <if test="remark != null">
                remark = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="checked != null">
                checked = #{checked,jdbcType=SMALLINT},
            </if>
            <if test="deleteFlag != null">
                delete_flag = #{deleteFlag,jdbcType=SMALLINT},
            </if>
            <if test="createBy != null">
                create_by = #{createBy,jdbcType=VARCHAR},
            </if>
            <if test="createDate != null">
                create_date = #{createDate,jdbcType=TIMESTAMP},
            </if>
            <if test="updateBy != null">
                update_by = #{updateBy,jdbcType=VARCHAR},
            </if>
            <if test="updateDate != null">
                update_date = #{updateDate,jdbcType=TIMESTAMP},
            </if>
            <if test="param1 != null">
                param1 = #{param1,jdbcType=VARCHAR},
            </if>
            <if test="param2 != null">
                param2 = #{param2,jdbcType=VARCHAR},
            </if>
            <if test="param3 != null">
                param3 = #{param3,jdbcType=VARCHAR},
            </if>
        </set>
        where id = #{id,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.dayuan.bean.data.BaseDeviceType">
        UPDATE base_device_type
        SET number         = #{number,jdbcType=VARCHAR},
            brand          = #{brand,jdbcType=VARCHAR},
            device_name    = #{deviceName,jdbcType=VARCHAR},
            device_series  = #{deviceSeries,jdbcType=VARCHAR},
            device_version = #{deviceVersion,jdbcType=VARCHAR},
            device_type    = #{deviceType,jdbcType=VARCHAR},
            device_maker   = #{deviceMaker,jdbcType=VARCHAR},
            description    = #{description,jdbcType=VARCHAR},
            type           = #{type,jdbcType=SMALLINT},
            file_path      = #{filePath,jdbcType=VARCHAR},
            remark         = #{remark,jdbcType=VARCHAR},
            checked        = #{checked,jdbcType=SMALLINT},
            delete_flag    = #{deleteFlag,jdbcType=SMALLINT},
            create_by      = #{createBy,jdbcType=VARCHAR},
            create_date    = #{createDate,jdbcType=TIMESTAMP},
            update_by      = #{updateBy,jdbcType=VARCHAR},
            update_date    = #{updateDate,jdbcType=TIMESTAMP},
            param1         = #{param1,jdbcType=VARCHAR},
            param2         = #{param2,jdbcType=VARCHAR},
            param3         = #{param3,jdbcType=VARCHAR}
        WHERE id = #{id,jdbcType=VARCHAR}
    </update>
    <!-- 分页基础查询 -->
    <select id="loadDatagrid" resultMap="BaseResultMap" parameterType="Object">
        select
        <include refid="Base_Column_List"/>
        from base_device_type
        <include refid="Example_Where_Clause"/>
        order by update_date ${order} limit #{rowOffset}, #{pageSize}
    </select>

    <select id="getRowTotal" resultType="java.lang.Integer" parameterType="Object">
        select count(1) as rowTotal
        from base_device_type
        <include refid="Example_Where_Clause"/>
    </select>
    <!-- 查询所有的类别信息 -->
    <select id="queryAll" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        <include refid="Base_Column_List"/>
        from base_device_type where delete_flag = 0 and type=0 and checked=1 order by update_date desc
    </select>
    <!-- 根据 类别名称查询信息-->
    <select id="queryByDeviceName" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        <include refid="Base_Column_List"/>
        from base_device_type where delete_flag = 0 and type=0 and checked=1 and device_name=#{deviceName}
    </select>
    <!-- /**
     * 根据SAP码查询 仪器、检测箱
     * @param number
     * @return
     * @author LuoYX
     * @date 2018年1月30日
     */ -->
    <select id="queryDeviceByNumber" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from base_device_type where checked=1 and number=#{number}
    </select>

    <!--shit:查询出仪器的所有类型-->
    <select id="selectAppType" resultType="java.util.Map">
        SELECT
            device_series,
            device_name
        FROM base_device_type
        WHERE delete_flag = 0 AND type = 0
        ORDER BY device_series
    </select>
    <!--shit:查询出类型和图片-->
    <select id="selectAppTypeAndImg" resultMap="BaseResultMap">
        SELECT DISTINCT
            device_series,
            file_path
        FROM base_device_type
        WHERE delete_flag = 0 AND type = 0
        GROUP BY device_series
    </select>
    <select id="queryDeviceBySeries" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from base_device_type where delete_flag=0 and checked=1 and device_series=#{series}
    </select>
</mapper>